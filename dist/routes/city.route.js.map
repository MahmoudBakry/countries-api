{"version":3,"sources":["../../src/routes/city.route.js"],"names":["router","Router","requireAuth","authenticate","session","use","route","post","single","validateBody","createCity","get","allCities","cityInformaton","put","updateCity"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAEA;;;;;;AADA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEA,IAAMC,cAAc,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAApB;AACAJ,OAAOK,GAAP;;AAEAL,OAAOM,KAAP,CAAa,oBAAb;AACI;AACA;;;;;;;;;;;;;;;;;;AAkBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AApBJ,CA0DKC,IA1DL,CA2DQ,0BAAa,MAAb,EAAqBC,MAArB,CAA4B,KAA5B,CA3DR,EA4DQN,WA5DR,EA6DQ,eAAeO,YAAf,EA7DR,EA8DQ,eAAeC,UA9DvB;AAgEI;AACA;;;;;;;;;;;;;;;;;;;;AAjEJ,CAqFKC,GArFL,CAqFS,eAAeC,SArFxB;AAsFA;AACAZ,OAAOM,KAAP,CAAa,4BAAb;;AAEI;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AAJJ,CA0BKK,GA1BL,CA0BS,eAAeE,cA1BxB;AA2BI;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA5BJ,CAmEKC,GAnEL,CAoEQ,0BAAa,MAAb,EAAqBN,MAArB,CAA4B,KAA5B,CApER,EAqEQN,WArER,EAsEQ,eAAea,UAtEvB;kBAuEef,M","file":"city.route.js","sourcesContent":["import express from \"express\";\r\nimport cityController from \"../controllers/city.controller\";\r\nimport regionRoute from \"./region.route\";\r\nimport { multerSaveTo } from \"../services/multer\";\r\nconst router = express.Router();\r\nimport passport from \"passport\";\r\nconst requireAuth = passport.authenticate('jwt', { session: false });\r\nrouter.use(regionRoute);\r\n\r\nrouter.route('/:countryId/cities')\r\n    //create new city\r\n    /**\r\n        * @swagger\r\n        * definitions:\r\n        *   city:\r\n        *     required:\r\n        *     - \"name\"\r\n        *     - \"country\"   \r\n        *     properties:\r\n        *       name:\r\n        *         type: string\r\n        *       creationDate:\r\n        *         type: date\r\n        *         readOnly : true  \r\n        *       country: \r\n        *         type : number\r\n        *         readOnly : true    \r\n        */\r\n\r\n    /**\r\n * @swagger\r\n * /countries/{countryId}/cities:\r\n *   post:\r\n *     consumes:\r\n *         - multipart/form-data\r\n *     tags:\r\n *       - City\r\n *     description: create new city\r\n *     parameters: \r\n *       - name: countryId\r\n *         descrition : country ID\r\n *         in : path\r\n *         required : true\r\n *       - name: \"name\"\r\n *         in: formData\r\n *         description: \"Name Of city\"\r\n *         required: true\r\n *         type: string   \r\n *       - name: \"img\"\r\n *         in: formData\r\n *         description: city Image to upload\r\n *         required: false\r\n *         type: \"file\"  \r\n *         schema:\r\n *           $ref: '#/definitions/city'\r\n *     responses:\r\n *       201:\r\n *         description: return created city \r\n *       400:\r\n *         description: You have made an error maybe you didn't provide a required attribute\r\n *       422: \r\n *         description: name of city is duplicated in the  same country or any invalid data\r\n *       403: \r\n *         description: your token is bbelong to normal user not an admin[forrbiden] \r\n *       401: \r\n *         description: token is required    \r\n*/\r\n    .post(\r\n        multerSaveTo('city').single('img'),\r\n        requireAuth,\r\n        cityController.validateBody(),\r\n        cityController.createCity\r\n    )\r\n    //retrive all cities\r\n    /**\r\n    * @swagger\r\n    * /countries/{countryId}/cities:\r\n    *   get:\r\n    *     tags:\r\n    *       - City\r\n    *     description: retrive all cities\r\n    *     parameters : \r\n    *       - name : countryId\r\n    *         in : path\r\n    *         required : true       \r\n    *     responses:\r\n    *       200:\r\n    *         description: return all cities \r\n    *       401: \r\n    *         description: token is required\r\n    *       204: \r\n    *         description: no content exist now \r\n    *   \r\n   */\r\n    .get(cityController.allCities)\r\n//routes using cityId \r\nrouter.route('/:countryId/cities/:cityId')\r\n\r\n    //retrive one city details\r\n    //retrive one city\r\n    /**\r\n    * @swagger\r\n    * /countries/{countryId}/cities/{cityId}:\r\n    *   get:\r\n    *     tags:\r\n    *       - City\r\n    *     description: retrive one city\r\n    *     parameters : \r\n    *       - name : cityId\r\n    *         in : path\r\n    *         required : true   \r\n    *     responses:\r\n    *       200:\r\n    *         description: return city information \r\n    *       401: \r\n    *         description: token is required\r\n    *       204: \r\n    *         description: no content exist now \r\n    *       422: \r\n    *         description : validation error in cityId may be invalid or missed\r\n    *   \r\n   */\r\n    .get(cityController.cityInformaton)\r\n    //udpate one city\r\n    /**\r\n     * @swagger\r\n     * /countries/{countryId}/cities/{cityId}:\r\n     *   put:\r\n     *     consumes:\r\n     *         - multipart/form-data\r\n     *     tags:\r\n     *       - City\r\n     *     description: update one city\r\n     *     parameters:\r\n     *       - name : cityId \r\n     *         in : path\r\n     *         required : true\r\n     *       - name: countryId\r\n     *         descrition : country ID\r\n     *         in : path\r\n     *         required : true\r\n     *       - name: \"name\"\r\n     *         in: formData\r\n     *         description: \"Name Of city\"\r\n     *         required: true\r\n     *         type: string   \r\n     *       - name: \"img\"\r\n     *         in: formData\r\n     *         description: city Image to upload\r\n     *         required: false\r\n     *         type: \"file\"  \r\n     *         schema:\r\n     *           $ref: '#/definitions/city' \r\n     *     responses:\r\n     *       200:\r\n     *         description: updating proccess done  \r\n     *       403: \r\n     *         description: your token is bbelong to normal user not an admin[forrbiden] \r\n     *       401: \r\n     *         description: token is required\r\n     *       422: \r\n     *         description: validation error may duplicated country name \r\n    */\r\n    .put(\r\n        multerSaveTo('city').single('img'),\r\n        requireAuth,\r\n        cityController.updateCity)\r\nexport default router; "]}