{"version":3,"sources":["../../src/routes/user.route.js"],"names":["requireAuth","authenticate","session","requireSignIn","router","Router","route","put","checkEmail","checkPhone","post","signin","single","validateBody","signup"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA,IAAMA,cAAc,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAApB;AACA,IAAMC,gBAAgB,mBAASF,YAAT,CAAsB,OAAtB,EAA+B,EAAEC,SAAS,KAAX,EAA/B,CAAtB;AACA,IAAME,SAAS,kBAAQC,MAAR,EAAf;AACAD,OAAOE,KAAP,CAAa,aAAb;AACI;;;;;;;;;;AAUA;;;;;;;;;;;;;;;;;;;;AAXJ,CA+BKC,GA/BL,CA+BS,eAAeC,UA/BxB;;AAkCAJ,OAAOE,KAAP,CAAa,aAAb;;AAEI;;;;;;;;;;;AAWA;;;;;;;;;;;;;;;;;;;;AAbJ,CAiCKC,GAjCL,CAiCS,eAAeE,UAjCxB;;AAoCA;;;;;;;;;;;;;;AAcA;;;;;;;;;;;;;;;;;;;;;AAsBAL,OAAOM,IAAP,CAAY,SAAZ,EAAuBP,aAAvB,EAAsC,eAAeQ,MAArD;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDAP,OAAOE,KAAP,CAAa,SAAb,EACKI,IADL,CAEQ,0BAAa,OAAb,EAAsBE,MAAtB,CAA6B,KAA7B,CAFR,EAGQ,eAAeC,YAAf,EAHR,EAIQ,eAAeC,MAJvB;kBAMeV,M","file":"user.route.js","sourcesContent":["import express from \"express\";\r\nimport UserController from \"../controllers/user.controller\";\r\nimport passport from \"passport\";\r\nimport passportService from '../services/passport';\r\nimport { multerSaveTo } from \"../services/multer\";\r\nconst requireAuth = passport.authenticate('jwt', { session: false });\r\nconst requireSignIn = passport.authenticate('local', { session: false });\r\nconst router = express.Router();\r\nrouter.route('/checkemail')\r\n    /**\r\n    * @swagger\r\n    * definitions:\r\n    *   CheckEmail:\r\n    *     required:\r\n    *     - \"email\"\r\n    *     properties:\r\n    *       email:\r\n    *         type: string\r\n    */\r\n    /**\r\n     * @swagger\r\n     * /checkemail:\r\n     *   put:\r\n     *     tags:\r\n     *       - Validate Data\r\n     *     description: check if email is exist or not\r\n     *     parameters:\r\n     *       - name: email\r\n     *         description: email \r\n     *         in: body\r\n     *         required: true\r\n     *         schema:\r\n     *           $ref: '#/definitions/CheckEmail'\r\n     *     responses:\r\n     *       200:\r\n     *         description: Returns boolean unique value\r\n     *       422:\r\n     *         description: email is required\r\n    */\r\n    .put(UserController.checkEmail)\r\n\r\n\r\nrouter.route('/checkphone')\r\n\r\n    /**\r\n    * @swagger\r\n    * definitions:\r\n    *   CheckPhone:\r\n    *     required:\r\n    *     - \"phone\"\r\n    *     properties:\r\n    *       phone:\r\n    *         type: string\r\n    */\r\n\r\n    /**\r\n     * @swagger\r\n     * /checkphone:\r\n     *   put:\r\n     *     tags:\r\n     *       - Validate Data\r\n     *     description: check if phone is exist or not\r\n     *     parameters:\r\n     *       - name: phone\r\n     *         description: phone \r\n     *         in: body\r\n     *         required: true\r\n     *         schema:\r\n     *           $ref: '#/definitions/CheckPhone'\r\n     *     responses:\r\n     *       200:\r\n     *         description: Returns boolean unique value\r\n     *       422:\r\n     *         description: email is required\r\n    */\r\n    .put(UserController.checkPhone)\r\n\r\n\r\n/**\r\n* @swagger\r\n* definitions:\r\n*   LoginBody:\r\n*     required:\r\n*     - \"email\"\r\n*     - \"password\"\r\n*     properties:\r\n*       email:\r\n*         type: string\r\n*       password:\r\n*         type: string\r\n*/\r\n\r\n/**\r\n * @swagger\r\n * /signin:\r\n *   post:\r\n *     tags:\r\n *       - Auth\r\n *     description: Sign in to the api\r\n *     parameters:\r\n *       - name: body\r\n *         description: Credentials\r\n *         in: body\r\n *         required: true\r\n *         schema:\r\n *           $ref: '#/definitions/LoginBody'\r\n *     responses:\r\n *       200:\r\n *         description: Returns saved user + your token\r\n *       400:\r\n *         description: You have made an error maybe you didn't provide a required attribute\r\n*/\r\n\r\n\r\nrouter.post(\"/signin\", requireSignIn, UserController.signin);\r\n\r\n\r\n/**\r\n* @swagger\r\n* definitions:\r\n*   User:\r\n*     required:\r\n*     - \"name\"\r\n*     - \"email\"\r\n*     - \"password\"\r\n*     - \"phone\"\r\n*     properties:\r\n*       name:\r\n*         type: string\r\n*       email:\r\n*         type: string\r\n*       password:\r\n*         type: string\r\n*       phone:\r\n*         type: string\r\n*       country:\r\n*         type: number\r\n*       img:\r\n*         type: string\r\n*         readOnly: true\r\n*       type : \r\n*         type : string\r\n*           \r\n*/\r\n\r\n/**\r\n * @swagger\r\n * /signup:\r\n *   post:\r\n *     tags:\r\n *       - Auth\r\n *     consumes:\r\n *       - \"multipart/form-data\"\r\n *     description: Sign up to the api\r\n *     parameters:\r\n *           - name: \"name\"\r\n *             in: \"formData\"\r\n *             description: \"Name Of User\"\r\n *             required: true\r\n *             type: \"string\"\r\n *           - name: \"email\"\r\n *             in: \"formData\"\r\n *             description: \"email Of User\"\r\n *             required: true\r\n *             type: \"string\"\r\n *           - name: \"password\"\r\n *             in: \"formData\"\r\n *             description: \"password Of User\"\r\n *             required: true\r\n *             type: \"string\"\r\n *           - name: \"phone\"\r\n *             in: \"formData\"\r\n *             description: \"Phone Of User\"\r\n *             required: true\r\n *             type: \"number\"\r\n *           - name: \"country\"\r\n *             in: \"formData\"\r\n *             description: \"Country Of User\"\r\n *             required: true \r\n *             type: \"string\"\r\n *           - name: \"img\"\r\n *             in: \"formData\"\r\n *             description: \"User Image to upload\"\r\n *             required: false\r\n *             type: \"file\"\r\n *           - name : type \r\n *             in : \"formData\" \r\n *             description: type of user ADMIN or NORMAL and normal is default          \r\n *     responses:\r\n *       201:\r\n *         description: Returns saved user + your token\r\n *       422:\r\n *         description: You have made an error maybe you didn't provide a required attribute a duplication email or phone  \r\n */\r\n\r\nrouter.route('/signup')\r\n    .post(\r\n        multerSaveTo('users').single('img'),\r\n        UserController.validateBody(),\r\n        UserController.signup\r\n    )\r\nexport default router;\r\n"]}